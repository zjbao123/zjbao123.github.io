<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="数据库,">










<meta name="description" content="此篇为上一篇的姊妹篇，感觉一不小心记的又臭又长了，不过内容确实不是一篇文章能说的清的。">
<meta name="keywords" content="数据库">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL语言的数据查询">
<meta property="og:url" content="http://zjbao123.github.io/2016/10/27/mysql/SQL语言的数据查询/index.html">
<meta property="og:site_name" content="不为繁华易匠心">
<meta property="og:description" content="此篇为上一篇的姊妹篇，感觉一不小心记的又臭又长了，不过内容确实不是一篇文章能说的清的。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-03-22T14:44:36.722Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SQL语言的数据查询">
<meta name="twitter:description" content="此篇为上一篇的姊妹篇，感觉一不小心记的又臭又长了，不过内容确实不是一篇文章能说的清的。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://zjbao123.github.io/2016/10/27/mysql/SQL语言的数据查询/">





  <title>SQL语言的数据查询 | 不为繁华易匠心</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">不为繁华易匠心</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-notes">
          <a href="/notes" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br>
            
            notes
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-guestbook">
          <a href="/guestbook" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-group"></i> <br>
            
            guestbook
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zjbao123.github.io/2016/10/27/mysql/SQL语言的数据查询/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zjbao123">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不为繁华易匠心">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">SQL语言的数据查询</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-27T21:22:50+08:00">
                2016-10-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/总结/" itemprop="url" rel="index">
                    <span itemprop="name">总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/10/27/mysql/SQL语言的数据查询/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count gitment-comments-count" data-xid="/2016/10/27/mysql/SQL语言的数据查询/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>此篇为上一篇的姊妹篇，感觉一不小心记的又臭又长了，不过内容确实不是一篇文章能说的清的。</p>
<a id="more"></a>
<p>SELECT语句的一般格式为:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//格式一</span><br><span class="line"><span class="keyword">SELECT</span>〈列名〉[&#123;，〈列名〉&#125;]</span><br><span class="line"><span class="keyword">FROM</span>〈表名或视图名〉[&#123;，〈表名或视图名〉&#125;]</span><br><span class="line">[<span class="keyword">WHERE</span>〈检索条件〉]</span><br><span class="line">[<span class="keyword">GROUP</span> <span class="keyword">BY</span> &lt;列名<span class="number">1</span>&gt;[<span class="keyword">HAVING</span> &lt;条件表达式&gt;]]</span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> &lt;列名<span class="number">2</span>&gt;[<span class="keyword">ASC</span>|<span class="keyword">DESC</span>]];</span><br><span class="line">//格式二</span><br><span class="line"><span class="keyword">SELECT</span>  [<span class="keyword">ALL</span>|<span class="keyword">DISTINCT</span>][TOP N [<span class="keyword">PERCENT</span>][<span class="keyword">WITH</span> <span class="keyword">TIES</span>]]</span><br><span class="line">   列名<span class="number">1</span> [<span class="keyword">AS</span> 别名<span class="number">1</span>]</span><br><span class="line">[, 列名<span class="number">2</span> [ <span class="keyword">AS</span> 别名<span class="number">2</span>]…]</span><br><span class="line">[<span class="keyword">INTO</span> 新表名]</span><br><span class="line"><span class="keyword">FROM</span> 表名 <span class="number">1</span>[[<span class="keyword">AS</span>] 表<span class="number">1</span>别名]</span><br><span class="line">[<span class="keyword">INNER</span>|<span class="keyword">RIGHT</span>|<span class="keyword">FULL</span>|<span class="keyword">OUTER</span>][<span class="keyword">OUTER</span>]<span class="keyword">JOIN</span></span><br><span class="line">    表名<span class="number">2</span> [[<span class="keyword">AS</span>] 表<span class="number">2</span>别名]</span><br><span class="line"><span class="keyword">ON</span> 条件</span><br></pre></td></tr></table></figure></p>
<p>查询结束时仍然是一个表。</p>
<p>SELECT语句的执行过程是:<br>根据WHERE子句的检索条件，从FROM子句指定的基本表或视图中选取满足条件的元组，再按照SELECT子句中指定的列，投影得到结果表。<br>如果有GROUP子句，则将查询结果按照&lt;列名1&gt;相同的值进行分组。<br>如果GROUP子句后有HAVING短语，则只输出满足HAVING条件的元组。<br>如果有ORDER子句，查询结果还要按照&lt;列名2&gt;的值进行排序。</p>
<h3 id="投影查询"><a href="#投影查询" class="headerlink" title="投影查询"></a>投影查询</h3><p>在查询中不使用WHERE子句的无条件查询，也称投影查询。<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询选修了课程的学生号</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> SNO <span class="keyword">FROM</span> SC</span><br></pre></td></tr></table></figure></p>
<p>利用投影查询可控制列名的顺序，并可通过指定别名改变查询结果的列标题的名字。<br><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询全体学生的姓名、学号和年龄。</span></span><br><span class="line"><span class="built_in">SELECT</span> SNAME <span class="built_in">NAME</span>, SNO, AGE <span class="keyword">FROM</span> S</span><br></pre></td></tr></table></figure></p>
<p>其中，NAME为SNAME的别名。</p>
<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><p>当要在表中找出满足某些条件的行时，则需使用WHERE子句指定查询条件。</p>
<p>WHERE子句中，条件通常通过三部分来描述：<br>1.列名；<br>2.比较运算符；<br>3.列名、常数。</p>
<p>比较运算符，除了常规的大于小于等于之外，还有下列这些常用的比较运算符：</p>
<p>不等于(&lt;&gt;)；多重条件(and,or);BETWEEN AND(确定范围)；IN(确定集合)；LIKE(字符匹配)；IS NULL（空值）</p>
<h4 id="1-比较大小"><a href="#1-比较大小" class="headerlink" title="1.比较大小"></a>1.比较大小</h4><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">SELECT</span> SNO,CNO,<span class="built_in">SCORE</span> <span class="keyword">FROM</span> SC WHERE <span class="built_in">SCORE</span>&gt;<span class="number">85</span></span><br></pre></td></tr></table></figure>
<h4 id="2-多重条件查询"><a href="#2-多重条件查询" class="headerlink" title="2.多重条件查询"></a>2.多重条件查询</h4><p>当WHERE子句需要指定一个以上的查询条件时，则需要使用逻辑运算符AND、OR和NOT将其连结成复合的逻辑表达式。<br>其优先级由高到低为：NOT、AND、OR，用户可以使用括号改变优先级。<br><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询选修C1或C2且分数大于等于85分学生的的学号、课程号和成绩。</span></span><br><span class="line"><span class="built_in">SELECT</span> SNO，CNO，<span class="built_in">SCORE</span></span><br><span class="line">   <span class="keyword">FROM</span> SC</span><br><span class="line">WHERE（CNO=’C1’ <span class="built_in">OR</span> CNO=’C2’） <span class="built_in">AND</span></span><br><span class="line"> <span class="built_in">SCORE</span>&gt;=<span class="number">85</span></span><br></pre></td></tr></table></figure></p>
<h4 id="3-确定范围"><a href="#3-确定范围" class="headerlink" title="3.确定范围"></a>3.确定范围</h4><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询工资在1000至1500之间的教师的教师号、姓名及职称。</span></span><br><span class="line"><span class="keyword">SELECT</span> TNO,TN,PROF</span><br><span class="line">   <span class="keyword">FROM</span> T</span><br><span class="line"><span class="keyword">WHERE</span> SAL BETWEEN <span class="number">1000</span> <span class="keyword">AND</span> <span class="number">1500</span></span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line"><span class="keyword">SELECT</span> TNO,TN,PROF</span><br><span class="line">   <span class="keyword">FROM</span> T</span><br><span class="line"><span class="keyword">WHERE</span> SAL&gt;=<span class="number">1000</span> <span class="keyword">AND</span> SAL&lt;=<span class="number">1500</span></span><br></pre></td></tr></table></figure>
<h4 id="4-确定集合"><a href="#4-确定集合" class="headerlink" title="4.确定集合"></a>4.确定集合</h4><p>利用“IN”操作可以查询属性值属于指定集合的元组。</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//查询选修C1或C2的学生的学号、课程号和成绩。</span><br><span class="line"><span class="keyword">SELECT</span> SNO, CNO, SCORE </span><br><span class="line">   <span class="keyword">FROM</span> SC </span><br><span class="line"><span class="keyword">WHERE</span> CNO <span class="keyword">IN</span>(‘C1’, ‘C2’)</span><br><span class="line">//此语句也可以使用逻辑运算符“<span class="keyword">OR</span>”实现。</span><br><span class="line">//利用“<span class="keyword">NOT</span> <span class="keyword">IN</span>”可以查询指定集合外的元组。</span><br></pre></td></tr></table></figure>
<h4 id="5-部分匹配查询"><a href="#5-部分匹配查询" class="headerlink" title="5.部分匹配查询"></a>5.部分匹配查询</h4><p>上例均属于完全匹配查询，当不知道完全精确的値时，用户还可以使用LIKE或NOT LIKE进行部分匹配查询（也称模糊查询）。<br>LIKE定义的一般格式为：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">属性名</span>&gt;</span> LIKE <span class="tag">&lt;<span class="name">字符串常量</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>属性名必须为字符型，字符串常量的字符可以包含如下两个特殊符号：<br>%：表示任意知长度的字符串；</p>
<p>_：表示任意单个字符;</p>
<p>[charlist]:字符列中的任何单一字符;</p>
<p>[^charlist]或者[!charlist]:不在字符列中的任何单一字符。<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询所有姓张但不包含国或辽的教师的教师号和姓名。</span></span><br><span class="line"><span class="keyword">select</span>  * </span><br><span class="line"> <span class="keyword">from</span> S</span><br><span class="line"><span class="keyword">where</span> sname like <span class="string">'张[^国辽]_'</span></span><br></pre></td></tr></table></figure></p>
<h4 id="6-空值查询"><a href="#6-空值查询" class="headerlink" title="6.空值查询"></a>6.空值查询</h4><p>某个字段没有值称之为具有空值（NULL）。空值不同于零和空格，它不占任何存储空间。</p>
<p>例如，某些学生选课后没有参加考试，有选课记录，但没有考试成绩，考试成绩为空值，这与参加考试，成绩为零分的不同。<br><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> SNO, CNO</span><br><span class="line">   <span class="keyword">FROM</span> SC</span><br><span class="line"><span class="keyword">WHERE</span> SCORE <span class="keyword">IS</span> <span class="literal">NULL</span></span><br></pre></td></tr></table></figure></p>
<h3 id="常用库函数及统计汇总查询"><a href="#常用库函数及统计汇总查询" class="headerlink" title="常用库函数及统计汇总查询"></a>常用库函数及统计汇总查询</h3><table>
<thead>
<tr>
<th>函数名称</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>AVG</td>
<td>按列计算平均值</td>
</tr>
<tr>
<td>SUM</td>
<td>按列计算值的总和</td>
</tr>
<tr>
<td>MAX</td>
<td>求一列中的最大值</td>
</tr>
<tr>
<td>MIN</td>
<td>求一列中的最小值</td>
</tr>
<tr>
<td>COUNT</td>
<td>按列值计个数</td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//求学号为S1学生的总分和平均分。</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUM</span>(SCORE) <span class="keyword">AS</span> TotalScore, <span class="keyword">AVG</span>(SCORE) <span class="keyword">AS</span> AveScore</span><br><span class="line">   <span class="keyword">FROM</span> SC</span><br><span class="line"><span class="keyword">WHERE</span> (SNO = <span class="string">'S1'</span>) </span><br><span class="line"></span><br><span class="line">//求学校中共有多少个系</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="keyword">DISTINCT</span> DEPT) <span class="keyword">AS</span> DeptNum </span><br><span class="line">   <span class="keyword">FROM</span> S</span><br></pre></td></tr></table></figure>
<p>注意：<br>函数SUM和AVG只能对数值型字段进行计算。</p>
<p>COUNT函数对空值不计算，但对零进行计算。</p>
<h3 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h3><p><code>GROUP BY</code>子句可以将查询结果按属性列或属性列组合在行的方向上进行分组，每组在属性列或属性列组合上具有相同的值。<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">查询各位教师的教师号及其任课的门数。</span><br><span class="line">SELECT TNO,COUNT(*) AS C_NUM</span><br><span class="line">  <span class="keyword">FROM</span> TC</span><br><span class="line">GROUP BY TNO</span><br></pre></td></tr></table></figure></p>
<p>若在分组后还要按照一定的条件进行筛选，则需使用HAVING子句。<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> SNO,COUNT<span class="comment">(*) AS SC_NUM </span></span><br><span class="line"><span class="comment">  FROM SC</span></span><br><span class="line"><span class="comment">GROUP BY SNO       </span></span><br><span class="line"><span class="comment">HAVING COUNT(*)</span>&gt;=<span class="number">2</span></span><br></pre></td></tr></table></figure></p>
<p>当在一个SQL查询中同时使用WHERE子句，<code>GROUP  BY</code>子句和<code>HAVING</code>子句时，其顺序是<code>WHERE－GROUP  BY－ HAVING</code>。</p>
<p><strong><code>WHERE</code>与<code>HAVING</code>子句的根本区别在于作用对象不同。</strong></p>
<p>WHERE子句作用于基本表或视图，从中选择满足条件的元组；<br>HAVING子句作用于组，选择满足条件的组，必须用于GROUP BY子句之后，但GROUP BY子句可没有HAVING子句。</p>
<h3 id="查询排序"><a href="#查询排序" class="headerlink" title="查询排序"></a>查询排序</h3><p>当需要对查询结果排序时，应该使用ORDER BY子句<br>ORDER BY子句必须出现在其他子句之后<br>排序方式可以指定，DESC为降序，ASC为升序，缺省时为升序<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//查询选修C2、C3、C4或C5课程的学号、课程号和成绩，查询结果按学号升序排列，学号相同再按成绩降序排列。</span><br><span class="line"><span class="keyword">SELECT</span> SNO,CNO, SCORE </span><br><span class="line">   <span class="keyword">FROM</span> SC</span><br><span class="line"><span class="keyword">WHERE</span> CNO <span class="keyword">IN</span> (<span class="string">'C2'</span> ,<span class="string">'C3'</span>, <span class="string">'C4'</span>,<span class="string">'C5'</span>)</span><br><span class="line">   <span class="keyword">ORDER</span> <span class="keyword">BY</span> SNO,SCORE <span class="keyword">DESC</span> </span><br><span class="line">//求选课在三门以上且各门课程均及格的学生的学号及其总    成绩，查询结果按总成绩降序列出。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> SNO,<span class="keyword">SUM</span>(SCORE)<span class="keyword">AS</span> TotalScore</span><br><span class="line"><span class="keyword">FROM</span> SC</span><br><span class="line"><span class="keyword">WHERE</span> SCORE&gt;=<span class="number">60</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> SNO</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(*)&gt;=<span class="number">3</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">SUM</span>(SCORE) <span class="keyword">DESC</span></span><br></pre></td></tr></table></figure></p>
<p>上述执行过程如下：取出SC，筛选SCORE&gt;=60 的元组，讲选出的元组按照SNO分组，筛选选课三门以上的分组，一剩下的组中提取学号和总成绩，将选取结果排序。</p>
<p>另外，<code>ORDER BY SUM(SCORE) DESC</code>可以改写成<br><code>ORDER BY 2 DESC</code>,2 代表查询结果的第二列。 </p>
<h3 id="INTO-子句"><a href="#INTO-子句" class="headerlink" title="INTO 子句"></a>INTO 子句</h3><p>在默认子段组中创建一个新表并将来自查询的结果行插入新表中。<br><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line">     <span class="keyword">INTO</span> new_Table</span><br><span class="line">   <span class="keyword">FROM</span> S</span><br><span class="line"><span class="keyword">WHERE</span> Sex = ‘男’</span><br></pre></td></tr></table></figure></p>
<h3 id="COMPUTE子句"><a href="#COMPUTE子句" class="headerlink" title="COMPUTE子句"></a>COMPUTE子句</h3><p>生成合计作为附加的汇总列出现在结果集的最后。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.s<span class="comment">#,sname,age,sex,c#,grade </span></span><br><span class="line">   <span class="keyword">FROM</span> s,sc</span><br><span class="line"><span class="keyword">WHERE</span> s.s<span class="comment">#=sc.s# and</span></span><br><span class="line">               s.s<span class="comment">#='200203080101'</span></span><br><span class="line"><span class="keyword">COMPUTE</span> <span class="keyword">sum</span>(sc.grade),<span class="keyword">count</span>(s.s<span class="comment">#)</span></span><br></pre></td></tr></table></figure></p>
<h3 id="数据表连接及连接查询"><a href="#数据表连接及连接查询" class="headerlink" title="数据表连接及连接查询"></a>数据表连接及连接查询</h3><p>数据表之间的联系是通过表的字段值来体现的，这种字段称为连接字段。<br>连接操作的目的就是通过加在连接字段的条件将多个表连接起来，以便从多个表中查询数据。<br>前面的查询都是针对一个表进行的，当查询同时涉及两个以上的表时，称为连接查询。</p>
<p>表的连接方法有两种：<br>1.表之间满足一定的条件的行进行连接，此时FROM子句中指明进行连接的表名，<code>WHERE</code>子句指明连接的列名及其连接条件。<br>2.利用关键字<code>JOIN</code>进行连接。</p>
<p>具体分为下列几种：<br>1.INNER JOIN：现在符合条件的记录，此为默认值。<br>2.LEFT （OUTER） JOIN：显示符合条件的数据行以及左边表中不符合条件的数据行，此时右边数据行会以NULL来显示，此称为左连接。<br>3.RIGHT （OUTER） JOIN：显示符合条件的数据行以及右边表中不符合条件的数据行，此时左边数据行会以NULL来显示，此称为右连接。<br>4.FULL （OUTER） JOIN：显示符合条件的数据行以及左边表和右边表中不符合条件的数据行，此时缺乏数据的数据行会以NULL来显示。<br>5.CROSS JOIN：会将一个表的每一笔数据和另一表的每笔数据匹配成新的数据行。</p>
<p>当将<code>JOIN</code>关键词放于FROM子句中时，应有关键词<code>ON</code>与之相对应，以表明连接的条件。</p>
<h4 id="等值连接与非等值连接"><a href="#等值连接与非等值连接" class="headerlink" title="等值连接与非等值连接"></a>等值连接与非等值连接</h4><p>查询刘伟老师所讲授的课程。</p>
<p>方法1：<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">SELECT</span> T.TNO ,TN,CNO</span><br><span class="line">   FROM T,TC</span><br><span class="line"><span class="built_in">WHERE</span> (T.TNO = TC. TNO) <span class="keyword">AND</span> (TN = ‘刘伟’)</span><br></pre></td></tr></table></figure></p>
<p>上面的操作是将T表中的TNO 和TC表中的TNO相等的行连接，同时选取TN为“刘伟“的行，然后再在TN，CNO列上投影，这是连接、选取和投影的操作组合。</p>
<p>这里，TN=‘刘伟’为查询条件，而T.TNO = TC.TNO 为连接条件，TNO为连接字段。连接条件的一般格式为：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="tag">&lt;<span class="name">表名1</span>&gt;</span>.] <span class="tag">&lt;<span class="name">列名1</span>&gt;</span> <span class="tag">&lt;<span class="name">比较运算符</span>&gt;</span> [<span class="tag">&lt;<span class="name">表名2</span>&gt;</span>.] <span class="tag">&lt;<span class="name">列名2</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>其中,比较运算符主要有：＝、＞、＜、＞＝、＜＝、！＝。<br>当比较运算符为“＝“时，称为等值连接，其他情况为非等值连接。</p>
<p>当列名是唯一的，不需要加表名前缀。</p>
<p>方法2：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> T.TNO,TN,CNO</span><br><span class="line">   <span class="keyword">FROM</span> T <span class="keyword">INNER</span> <span class="keyword">JOIN</span> TC </span><br><span class="line">    <span class="keyword">ON</span> T.TNO=TC.TNO <span class="keyword">AND</span> T.TN=<span class="string">'刘伟'</span></span><br></pre></td></tr></table></figure></p>
<p>方法3：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> R2.TNO,R2.TN, R1.CNO </span><br><span class="line">   <span class="keyword">FROM</span></span><br><span class="line">      (<span class="keyword">SELECT</span> TNO,CNO </span><br><span class="line">          <span class="keyword">FROM</span> TC ) <span class="keyword">AS</span> R1</span><br><span class="line">       <span class="keyword">INNER</span> <span class="keyword">JOIN</span> </span><br><span class="line">       (<span class="keyword">SELECT</span> TNO ,TN </span><br><span class="line">            <span class="keyword">FROM</span> T</span><br><span class="line">         <span class="keyword">WHERE</span> TN=<span class="string">'刘伟'</span>) <span class="keyword">AS</span> R2</span><br><span class="line">        <span class="keyword">ON</span> R1.TNO=R2.TNO</span><br></pre></td></tr></table></figure></p>
<h4 id="自身连接"><a href="#自身连接" class="headerlink" title="自身连接"></a>自身连接</h4><p>查询所有比刘伟工资高的教师姓名、性别、工资和刘伟的工资。</p>
<p>要查询的内容均在同一表T中，可以将表T分别取两个别名，一个是X，一个是Y。将X, Y 中满足比刘伟工资高的行连接起来。这实际上是同一表T的自身连接。<br>方法1：<br><figure class="highlight tp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">X</span>.TN,<span class="keyword">X</span>.SAL AS SAL_a, <span class="keyword">Y</span>.SAL AS SAL_b </span><br><span class="line">   FROM T AS <span class="keyword">X</span> ,T AS <span class="keyword">Y</span> </span><br><span class="line">WHERE <span class="keyword">X</span>.SAL&gt;<span class="keyword">Y</span>.SAL <span class="keyword">AND</span> </span><br><span class="line">    <span class="keyword">Y</span>.TN=<span class="string">'刘伟'</span></span><br></pre></td></tr></table></figure></p>
<p>方法2：<br><figure class="highlight tp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">X</span>.TN, <span class="keyword">X</span>.SAL,<span class="keyword">Y</span>.SAL </span><br><span class="line">   FROM T AS <span class="keyword">X</span> INNER JOIN T AS <span class="keyword">Y</span></span><br><span class="line">      <span class="literal">ON</span> <span class="keyword">X</span>.SAL&gt;<span class="keyword">Y</span>.SAL <span class="keyword">AND</span> <span class="keyword">Y</span>.TN=<span class="string">'刘伟'</span></span><br></pre></td></tr></table></figure></p>
<p>方法3：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> R1.TN,R1.SAL, R2.SAL </span><br><span class="line">   <span class="keyword">FROM</span> </span><br><span class="line">    (<span class="keyword">SELECT</span> TN,SAL </span><br><span class="line">         <span class="keyword">FROM</span> T ) <span class="keyword">AS</span> R1</span><br><span class="line">    <span class="keyword">INNER</span> <span class="keyword">JOIN</span> </span><br><span class="line">    (<span class="keyword">SELECT</span> SAL </span><br><span class="line">         <span class="keyword">FROM</span> T</span><br><span class="line">      <span class="keyword">WHERE</span> TN=<span class="string">'刘伟'</span>) <span class="keyword">AS</span> R2</span><br><span class="line">     <span class="keyword">ON</span> R1.SAL&gt;R2.SAL</span><br></pre></td></tr></table></figure></p>
<h4 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h4><p>在上面的连接操作中，不满足连接条件的元组不能作为查询结果输出。<br><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//查询所有学生的学号、姓名、选课名称及成绩。（没有选课的同学的选课信息显示为空）则应写成如下的SQL语句。</span><br><span class="line"><span class="keyword">SELECT</span> S.SNO,SN,CN,SCORE</span><br><span class="line">   <span class="keyword">FROM</span> S</span><br><span class="line">       <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> SC</span><br><span class="line">       <span class="keyword">ON</span> S.SNO=SC.SNO</span><br><span class="line">       <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> C</span><br><span class="line">       <span class="keyword">ON</span> C.CNO=SC.CNO</span><br></pre></td></tr></table></figure></p>
<p>则查询结果只包括所有的学生，没有选课的同学的选课信息显示为空。</p>
<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p>在WHERE子句中包含一个形如SELECT-FROM-WHERE的查询块，此查询块称为子查询或嵌套查询，包含子查询的语句称为父查询或外部查询。</p>
<p>子查询的嵌套层次最多可达到255层，以层层嵌套的方式构造查询充分体现了SQL“结构化”的特点。</p>
<p>嵌套查询在执行时由里向外处理，每个子查询是在上一级外部查询处理之前完成，父查询要用到子查询的结果。</p>
<h4 id="返回一组值的子查询"><a href="#返回一组值的子查询" class="headerlink" title="返回一组值的子查询"></a>返回一组值的子查询</h4><p>如果子查询的返回值不止一个，而是一个集合时，则不能直接使用比较运算符，可以在比较运算符和子查询之间插入ANY或ALL。<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询讲授课程号为C5的教师姓名。</span></span><br><span class="line"><span class="keyword">SELECT</span> TN</span><br><span class="line">   <span class="keyword">FROM</span> T</span><br><span class="line"><span class="keyword">WHERE</span> TNO=ANY</span><br><span class="line">      (<span class="keyword">SELECT</span> TNO </span><br><span class="line">          <span class="keyword">FROM</span> TC</span><br><span class="line">       <span class="keyword">WHERE</span> CNO=<span class="string">'C5'</span>)</span><br><span class="line"><span class="comment">//该例也可以使用前面所讲的连接操作来实现：</span></span><br><span class="line"><span class="keyword">SELECT</span> TN</span><br><span class="line">   <span class="keyword">FROM</span> T,TC</span><br><span class="line"><span class="keyword">WHERE</span> T.TNO=TC.TNO <span class="keyword">AND</span></span><br><span class="line">               TC.CNO=<span class="string">'C5‘</span></span><br></pre></td></tr></table></figure></p>
<p>可见，对于同一查询可使用子查询和连接两种方法来解决，可根据习惯任意选用。 </p>
<p>另外，还可以使用IN代替“=ANY”。<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TN</span><br><span class="line">   <span class="keyword">FROM</span> T</span><br><span class="line"><span class="keyword">WHERE</span> TNO <span class="keyword">IN</span></span><br><span class="line">    (<span class="keyword">SELECT</span> TNO </span><br><span class="line">        <span class="keyword">FROM</span> TC</span><br><span class="line">     <span class="keyword">WHERE</span> CNO=<span class="string">'C5'</span>)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> TN</span><br><span class="line">   <span class="keyword">FROM</span> T</span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">'C5'</span> !=<span class="keyword">ALL</span></span><br><span class="line">     ( <span class="keyword">SELECT</span> CNO </span><br><span class="line">           <span class="keyword">FROM</span> TC</span><br><span class="line">        <span class="keyword">WHERE</span> TNO=T.TNO)</span><br></pre></td></tr></table></figure>
<p><code>!=ALL</code>的含义为不等于子查询结果中的任何一个值，也可使用<code>NOT IN</code>代替<code>!=ALL</code>。</p>
<p>前面所讲的子查询均为普通子查询，而本例中子查询的查询条件引用了父查询表中的属性值（T表的TNO值），我们把这类查询称为相关子查询。</p>
<p>二者的执行方式不同，相关子查询并不是先执行子查询，而是首先选取父查询表的第一行记录，内部的子查询利用此行中相关的属性值进行查询。<br>然后父查询根据子查询返回的结果判断此行是否满足查询条件。如果满足条件，则把该行放入父查询的查询结果集合中。重复执行这一过程，直到处理完父查询表中的每一行数据。</p>
<p>如上行所述，表T中每一行都要执行一次子查询。<br>因此，相关子查询的执行次数是由父查询表的行数决定的。</p>
<p>除了之前说的ALL,ANY,IN之外，还可以使用EXISTS来表示存在与否。带有EXISTS的子查询不返回任何实际数据，它只得到逻辑值“真”或“假”。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">查询讲授课程号为C5的教师姓名。</span><br><span class="line"><span class="keyword">SELECT</span> TN</span><br><span class="line">   <span class="keyword">FROM</span> T</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span></span><br><span class="line">    (<span class="keyword">SELECT</span> * </span><br><span class="line">        <span class="keyword">FROM</span> TC</span><br><span class="line">     <span class="keyword">WHERE</span> TNO=T.TNO</span><br><span class="line">    <span class="keyword">AND</span> CNO=<span class="string">'C5'</span>)</span><br></pre></td></tr></table></figure>
<p>当子查询TC表存在一行记录满足其WHERE子句中的条件时，则父查询便得到一个TN值，重复执行以上过程，直到得出最后结果。</p>
<h3 id="集合查询"><a href="#集合查询" class="headerlink" title="集合查询"></a>集合查询</h3><p>集合操作分为并操作UNION,交操作INTERSECT,差操作EXCEPT。</p>
<p>参加集合操作的各查询结果的列数必须相同；对应项的数据类型也必须相同。<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line">   <span class="keyword">FROM</span> S</span><br><span class="line"><span class="keyword">WHERE</span> dept= <span class="string">'CS'</span></span><br><span class="line">  <span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line">   <span class="keyword">FROM</span> S</span><br><span class="line"><span class="keyword">WHERE</span> age&lt;=<span class="number">19</span></span><br><span class="line"><span class="comment">//等于</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span>  *</span><br><span class="line">   <span class="keyword">FROM</span> S</span><br><span class="line"><span class="keyword">WHERE</span> dept= <span class="string">'CS'</span>  <span class="keyword">OR</span>  age&lt;=<span class="number">19</span>；</span><br></pre></td></tr></table></figure></p>
<p>UNION：将多个查询结果合并起来时，系统自动去掉重复元组。  <code>or</code><br>UNION ALL：将多个查询结果合并起来时，保留重复元组<br>INTERSECT：求两个结果的交集 <code>and</code><br>EXCEPT:差集</p>
<h3 id="SQL数据更新"><a href="#SQL数据更新" class="headerlink" title="SQL数据更新"></a>SQL数据更新</h3><p>SQL语言的数据更新语句DML主要包括插入数据、修改数据和删除数据三种语句。</p>
<h4 id="插入数据记录"><a href="#插入数据记录" class="headerlink" title="插入数据记录"></a>插入数据记录</h4><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//插入单行记录</span></span><br><span class="line">INSERT INTO <span class="params">&lt;表名&gt;</span>[(<span class="params">&lt;列名<span class="number">1</span>&gt;</span>[,<span class="params">&lt;列名<span class="number">2</span>&gt;</span>…])] VALUES(<span class="params">&lt;值&gt;</span>)</span><br><span class="line"><span class="comment">//插入多行记录</span></span><br><span class="line">INSERT INTO <span class="params">&lt;表名&gt;</span> [(<span class="params">&lt;列名<span class="number">1</span>&gt;</span>[,<span class="params">&lt;列名<span class="number">2</span>&gt;</span>…])] 子查询</span><br></pre></td></tr></table></figure>
<h4 id="修改数据记录"><a href="#修改数据记录" class="headerlink" title="修改数据记录"></a>修改数据记录</h4><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//<span class="keyword">UPDATE</span> &lt;表名&gt; <span class="keyword">SET</span> &lt;列名&gt;=&lt;表达式&gt; [,&lt;列名&gt;=&lt;表达式&gt;] … [<span class="keyword">WHERE</span> &lt;条件&gt;]</span><br><span class="line">//利用子查询提供要修改的值</span><br><span class="line"><span class="keyword">UPDATE</span> T</span><br><span class="line"><span class="keyword">SET</span> SAL =</span><br><span class="line">(<span class="keyword">SELECT</span> <span class="number">1.2</span>*<span class="built_in">AVG</span>(SAL) </span><br><span class="line"><span class="keyword">FROM</span> T)</span><br></pre></td></tr></table></figure>
<p>当需要多行修改多行时，<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//多行修改多行</span></span><br><span class="line">UPDATE <span class="params">&lt;表<span class="number">1</span>&gt;</span> a</span><br><span class="line">inner join <span class="params">&lt;表<span class="number">2</span>&gt;</span> b ON <span class="params">&lt;两表的关系&gt;</span></span><br><span class="line">SET a.<span class="params">&lt;列名&gt;</span>=b.<span class="params">&lt;列名&gt;</span></span><br><span class="line">WHERE</span><br><span class="line"><span class="params">&lt;条件&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//记得提交！</span></span><br><span class="line">COMMIT;</span><br></pre></td></tr></table></figure></p>
<h4 id="删除数据记录"><a href="#删除数据记录" class="headerlink" title="删除数据记录"></a>删除数据记录</h4><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> </span><br><span class="line">    <span class="keyword">FROM</span> &lt;表名&gt;</span><br><span class="line">[<span class="keyword">WHERE</span> &lt;条件&gt;]</span><br><span class="line">//利用子查询选择要删除的行</span><br><span class="line"><span class="keyword">DELETE</span></span><br><span class="line">    <span class="keyword">FROM</span> TC </span><br><span class="line"> <span class="keyword">WHERE</span> TNO=  </span><br><span class="line">(<span class="keyword">SELECT</span> TNO</span><br><span class="line">    <span class="keyword">FROM</span> T</span><br><span class="line"> <span class="keyword">WHERE</span> TN=’ 刘伟’)</span><br></pre></td></tr></table></figure>
<h3 id="正则匹配"><a href="#正则匹配" class="headerlink" title="正则匹配"></a>正则匹配</h3><p>MYSQL可以使用正则表达式进行匹配。使用的运算符是 REGEXP。</p>
<table>
<thead>
<tr>
<th>模式</th>
<th>模式匹配对象</th>
</tr>
</thead>
<tbody>
<tr>
<td>^</td>
<td>字符串的开始位置</td>
</tr>
<tr>
<td>$</td>
<td>字符串的结尾</td>
</tr>
<tr>
<td>.</td>
<td>单个字符</td>
</tr>
<tr>
<td>[…]</td>
<td>一对方括号之间的字符</td>
</tr>
<tr>
<td>[^…]</td>
<td>未在一对方括号之间的字符</td>
</tr>
<tr>
<td>p1丨p2丨p3</td>
<td>交替匹配模式1、模式2或模式3</td>
</tr>
<tr>
<td>*</td>
<td>匹配前面元素的零个或多个实例</td>
</tr>
<tr>
<td>+</td>
<td>匹配前面元素的一个或多个实例</td>
</tr>
<tr>
<td>{n}</td>
<td>匹配前面元素的n个实例</td>
</tr>
<tr>
<td>{m,n}</td>
<td>匹配前面元素的m~n个实例，m &lt;= n</td>
</tr>
</tbody>
</table>
<h3 id="大小写敏感"><a href="#大小写敏感" class="headerlink" title="大小写敏感"></a>大小写敏感</h3><p>要想让搜索对大小写敏感，可以如下例一般，使用 BINARY 关键字。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> p_Name <span class="keyword">name</span> <span class="keyword">FROM</span> persons <span class="keyword">WHERE</span> p_Name REGEXP <span class="built_in">BINARY</span> <span class="string">'j'</span>;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/数据库/" rel="tag"># 数据库</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/26/python/数据库杂谈/" rel="next" title="数据库杂记">
                <i class="fa fa-chevron-left"></i> 数据库杂记
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/11/02/通向自由之路/通向自由之路(6)元认知能力提高篇/" rel="prev" title="通向自由之路(6)元认知能力提高篇">
                通向自由之路(6)元认知能力提高篇 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      
        <div id="gitment-container"></div>
      
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="zjbao123">
            
              <p class="site-author-name" itemprop="name">zjbao123</p>
              <p class="site-description motion-element" itemprop="description">不为繁华易匠心</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">94</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">44</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/zjbao123" target="_blank" title="github">
                    
                      <i class="fa fa-fw fa-globe"></i>github</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://weibo.com/3822772562" target="_blank" title="weibo">
                    
                      <i class="fa fa-fw fa-globe"></i>weibo</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://www.zhihu.com/people/bao-lucky" target="_blank" title="zhihu">
                    
                      <i class="fa fa-fw fa-globe"></i>zhihu</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#投影查询"><span class="nav-number">1.</span> <span class="nav-text">投影查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#条件查询"><span class="nav-number">2.</span> <span class="nav-text">条件查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-比较大小"><span class="nav-number">2.1.</span> <span class="nav-text">1.比较大小</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-多重条件查询"><span class="nav-number">2.2.</span> <span class="nav-text">2.多重条件查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-确定范围"><span class="nav-number">2.3.</span> <span class="nav-text">3.确定范围</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-确定集合"><span class="nav-number">2.4.</span> <span class="nav-text">4.确定集合</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-部分匹配查询"><span class="nav-number">2.5.</span> <span class="nav-text">5.部分匹配查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-空值查询"><span class="nav-number">2.6.</span> <span class="nav-text">6.空值查询</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常用库函数及统计汇总查询"><span class="nav-number">3.</span> <span class="nav-text">常用库函数及统计汇总查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分组查询"><span class="nav-number">4.</span> <span class="nav-text">分组查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查询排序"><span class="nav-number">5.</span> <span class="nav-text">查询排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#INTO-子句"><span class="nav-number">6.</span> <span class="nav-text">INTO 子句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#COMPUTE子句"><span class="nav-number">7.</span> <span class="nav-text">COMPUTE子句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据表连接及连接查询"><span class="nav-number">8.</span> <span class="nav-text">数据表连接及连接查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#等值连接与非等值连接"><span class="nav-number">8.1.</span> <span class="nav-text">等值连接与非等值连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自身连接"><span class="nav-number">8.2.</span> <span class="nav-text">自身连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#外连接"><span class="nav-number">8.3.</span> <span class="nav-text">外连接</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#子查询"><span class="nav-number">9.</span> <span class="nav-text">子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#返回一组值的子查询"><span class="nav-number">9.1.</span> <span class="nav-text">返回一组值的子查询</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#集合查询"><span class="nav-number">10.</span> <span class="nav-text">集合查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL数据更新"><span class="nav-number">11.</span> <span class="nav-text">SQL数据更新</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#插入数据记录"><span class="nav-number">11.1.</span> <span class="nav-text">插入数据记录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改数据记录"><span class="nav-number">11.2.</span> <span class="nav-text">修改数据记录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除数据记录"><span class="nav-number">11.3.</span> <span class="nav-text">删除数据记录</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#正则匹配"><span class="nav-number">12.</span> <span class="nav-text">正则匹配</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#大小写敏感"><span class="nav-number">13.</span> <span class="nav-text">大小写敏感</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zjbao123</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count"></span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  







<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    

    
      <script type="text/javascript">
      function renderGitment(){
        var gitment = new Gitmint({
            id: '1477574570000',
            owner: 'zjbao123',
            repo: 'gitment-comments',
            
            lang: "" || navigator.language || navigator.systemLanguage || navigator.userLanguage,
            
            oauth: {
            
            
                client_secret: '41745e4830c51a14f12e4692271d84daa2bae3e7',
            
                client_id: 'e9efc8d61db1033ecc2e'
            }});
        gitment.render('gitment-container');
      }

      
      renderGitment();
      
      </script>
    







  





  

  

  

  
  

  

  

  

</body>
</html>
